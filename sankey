<!DOCTYPE html>
<html>
<head>
  <title>Sankey Diagram</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>
  <style>
    body { margin: 0; }
    #sankey { width: 100vw; height: 100vh; }
    .node rect { fill: #4e79a7; }
    .link { fill: none; stroke: #ccc; stroke-opacity: 0.4; }
  </style>
</head>
<body>
  <div id="sankey"></div>

  <script>
    // ===== YOUR DATA =====
    const data = {
      nodes: [
        {name: "Source A"}, {name: "Source B"}, 
        {name: "Process"}, {name: "Output"}
      ],
      links: [
        {source: 0, target: 2, value: 100},
        {source: 1, target: 2, value: 50},
        {source: 2, target: 3, value: 150}
      ]
    };

    // ===== DIAGRAM CODE =====
    const width = 800;
    const height = 600;
    const svg = d3.select("#sankey")
      .append("svg")
      .attr("width", width)
      .attr("height", height);

    const { nodes, links } = d3.sankey()
      .nodeWidth(15)
      .nodePadding(10)
      .extent([[1, 1], [width - 1, height - 1]])
      (data);

    // Draw links
    svg.append("g")
      .selectAll("path")
      .data(links)
      .join("path")
      .attr("d", d3.sankeyLinkHorizontal())
      .attr("stroke-width", d => Math.max(1, d.width));

    // Draw nodes
    svg.append("g")
      .selectAll("rect")
      .data(nodes)
      .join("rect")
      .attr("x", d => d.x0)
      .attr("y", d => d.y0)
      .attr("height", d => d.y1 - d.y0)
      .attr("width", d => d.x1 - d.x0);

    // Add labels
    svg.append("g")
      .selectAll("text")
      .data(nodes)
      .join("text")
      .attr("x", d => d.x0 < width / 2 ? d.x1 + 6 : d.x0 - 6)
      .attr("y", d => (d.y1 + d.y0) / 2)
      .attr("dy", "0.35em")
      .attr("text-anchor", d => d.x0 < width / 2 ? "start" : "end")
      .text(d => d.name);
  </script>
</body>
</html>
